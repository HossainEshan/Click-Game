<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Home Page</title>
</head>
<body>
    <header>
        <h1>Welcome {{ current_user.username if current_user.is_authenticated else 'Anonymous' }}</h1>
    </header>
    <div>
        {% if current_user.is_anonymous %}
            <button onclick="location.href='{{ url_for('main.login') }}'">Login</button>
            <button onclick="location.href='{{ url_for('main.signup') }}'">Register</button>
        {% else %}
            <button onclick="location.href='{{ url_for('main.logout') }}'">Logout</button>
        {% endif %}
    </div>
    {% if current_user.is_authenticated %}
        <div>
            <button id="counterBtn">Click Me!</button>
            <p>Score: <span id="count">{{ current_user.count }}</span></p>

            <script type="text/javascript">
                $(document).ready(function() {
                    $('#counterBtn').click(function() {
                        $.ajax({
                            type: 'POST',
                            url: '{{ url_for("main.counter") }}',
                            success: function(response) {
                                $('#count').text(response.count);
                            }
                        });
                    });
                });
            </script>
        </div>
    {% endif %}

</body>
</html>
